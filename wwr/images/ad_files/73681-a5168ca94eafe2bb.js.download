"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73681],{3399:(e,a,t)=>{t.d(a,{h:()=>l});var r=t(30500),n=t(71335),i=t(59658),s=t(2450),o=t(60325),m=e=>{var{acc:a,totalCostOfItems:t,amountRemaining:n,totalAmount:i,bypassLowBalance:s=!1}=e;return s||(t>n&&(a.hasInsufficientSubscriptionCredits=!0,a.hasLowDebitableBalance=!1,a.insufficientAmount=t-n),!a.hasInsufficientSubscriptionCredits&&n<=i*r.O7&&(a.hasLowDebitableBalance=!0)),a},l=e=>{var{items:a,subscriptions:t,subscription:l,hasWrapperSubscription:c=!0}=e;if(a&&a.length){var d={hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:!1,insufficientAmount:0,total:0,totalCreditAmount:0,amountType:r.EV};return a.reduce((e,a)=>{var d,{licenseId:u,price:p}=a,g=(0,i.W)({assets:[a]}),_=l||(0,o.A)({subscriptions:null===(d=(0,s.s)({assetType:g,subscriptions:t}))||void 0===d?void 0:d.subscriptions,licenseName:u,assetType:g})||{},{totalAmount:y,amountRemaining:v,amountType:f,amount:I}=(0,n.hY)(_);e.amountType=f;var b=parseFloat(p),h=parseFloat(e.total)+b;if(e.total+=b,f===r.zy){var S=parseFloat(I),F=parseFloat(e.totalCreditAmount)+S;return e.totalCreditAmount+=S,m({acc:e,totalCostOfItems:F,amountRemaining:v,totalAmount:y,bypassLowBalance:!c})}return m({acc:e,totalCostOfItems:h,amountRemaining:v,totalAmount:y,bypassLowBalance:!c})},d)}var u=t||{},p=Object.keys(u).find(e=>Array.isArray(u[e])&&u[e].length),g=p&&(0,n.j6)({subscriptions:u[p]||[]})[0]||{},{totalAmount:_,amountRemaining:y,amountType:v}=(0,n.hY)(g);return{amountType:v,hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:y<=_*r.O7,insufficientAmount:null}}},16319:(e,a,t)=>{t.d(a,{k:()=>n});var r=t(9031),n=()=>{var{checkGate:e}=(0,r.cn)();return e("lego-2245-ledger-low-balance")}},30682:(e,a,t)=>{t.d(a,{b:()=>o,q:()=>s});var r=t(30500),n=t(59044),i=t(48007),s=e=>{var{uniqueSubscription:a}=e;if(!a)return{};var{priceAsAbsolute:t,creditCurrency:s,product:o}=a,m=(0,i.t)({subscription:a}),l=null!=s?s:null==o?void 0:o.currency;if(!t){var{creditPrice:c,creditType:d=r.EV}=a;return{price:"".concat((0,n.YO)({price:c,isUnlimited:m})),priceType:d,currency:l}}var{price:u,priceType:p}=t;return{price:"".concat((0,n.YO)({price:u,isUnlimited:m})),priceType:p,currency:l}},o=e=>{var{uniqueSubscription:a}=e;if(!a)return{};var{currency:t,currencyCost:i}=a;return{price:"".concat((0,n.YO)({price:i,isUnlimited:!1})),priceType:r.EV,currency:t}}},36479:(e,a,t)=>{t.d(a,{Df:()=>g,WP:()=>u,Xl:()=>m,bE:()=>c,bR:()=>y,cb:()=>d,dt:()=>l,fh:()=>_,h_:()=>p,vY:()=>f,vv:()=>v});var r=t(87011),n=t(93096),i=t(14264),s=t(40252),o=e=>{var{urlParams:a={},queryParams:t={}}=e,n="/cart/".concat(a.isPrimary?i.jT:i.pw),o=(0,r._)({},t);return{url:n,defaultParams:o,formattedUrl:(0,s.format)({pathname:n,query:o})}},m=function(){var{urlParams:e={},queryParams:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o({urlParams:e,queryParams:a}),i=(0,r._)({},t.defaultParams);return(0,n._)((0,r._)({},t),{defaultParams:i,formattedUrl:(0,s.format)({pathname:t.url,query:i})})},l=o,c=o,d=e=>{var{urlParams:a={},queryParams:t={}}=e,n="/cart/".concat(a.fromCartType,"/to/").concat(a.toCartType),i=(0,r._)({},t);return{url:n,defaultParams:i,formattedUrl:(0,s.format)({pathname:n,query:i})}},u=e=>{var{urlParams:a={}}=e,t="/organization/".concat(a.organizationId,"/invitations/").concat(a.status);return{url:t,formattedUrl:(0,s.format)({pathname:t})}},p=e=>{var{urlParams:a={}}=e,t="/account/user/".concat(a.id,"/settings");return{url:t,formattedUrl:(0,s.format)({pathname:t})}},g=e=>{var{urlParams:a={}}=e,t="/account/user/".concat(a.id,"/settings");return{url:t,formattedUrl:(0,s.format)({pathname:t})}},_=e=>{var{urlParams:a={}}=e,t="/organization/".concat(a.organizationId,"/invitations/").concat(a.invitationId);return{url:t,formattedUrl:(0,s.format)({pathname:t})}},y=e=>{var{urlParams:a={}}=e,t="/organization/".concat(a.organizationId,"/invitations");return{url:t,formattedUrl:(0,s.format)({pathname:t})}},v=e=>{var{urlParams:a={}}=e,t="/organization/users/".concat(a.id);return{url:t,formattedUrl:(0,s.format)({pathname:t})}},f=function(){var{queryParams:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a="/cart/".concat(i.jT,"/quote"),t=(0,n._)((0,r._)({},e),{exclude_comps:1,expand:"agreements"});return{url:a,defaultParams:t,formattedUrl:(0,s.format)({pathname:a,query:t})}}},36640:(e,a,t)=>{t.d(a,{A:()=>s});var r=t(69185),n=t(21075),i=t(9031),s=()=>{var e,a,t=(0,n.h)(),s=null==t?void 0:t.userCanViewPortfolio,{checkGate:o}=(0,i.cn)(),m=o(r.V_),l=null==t?void 0:null===(a=t.debugCohorts)||void 0===a?void 0:null===(e=a.active)||void 0===e?void 0:e.CohortEnterprisePrePaid;return s||m&&l}},62430:(e,a,t)=>{t.d(a,{S:()=>s});var r=t(13631),n=t(95807),i=t(96887),s=e=>{var{assetType:a,subscriptions:t,selectedLicenseId:s}=e;switch(a){case r.G_:return(0,i.K)({licenseName:s,subscriptions:t});case r.FY:case r.on:case r.M9:case r.W1:default:return(0,n.V)({subscriptions:t,licenseName:s})}}},66092:(e,a,t)=>{t.d(a,{_B:()=>Q,Ym:()=>K,ng:()=>ee,Nc:()=>ea,_R:()=>Z,Fh:()=>X,tS:()=>et,gz:()=>en});var r=t(51220),n=t(87011),i=t(93096),s=t(92424),o=t(36479),m=t(48973),l=t(32598),c=t(38436),d=t(13631),u=t(14264),p=t(45307),g=t(15261),_=t(30500),y=t(93417),v=t(73923),f=t(16835),I=t(31648),b=t(59044),h=t(44783),S=t(71335),F=t(68958),A=e=>{var{items:a,assetEligibleSubscriptions:t,canShowLedgerLowBalance:r}=e,n={hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:!1,insufficientAmount:0,total:0,totalCreditAmount:0,amountType:_.mz};return a.reduce((e,a)=>{var i,{licenseId:s,price:o,id:m}=a,l=null==t?void 0:null===(i=t[m])||void 0===i?void 0:i.licenseSubscriptions.find(e=>e.license===s);if(!l)return n;var{totalPrepaidAmount:c,prepaidAmountRemaining:d,currency:u,costType:p}=l,g=parseFloat(o),_=parseFloat(e.total)+g;return e.total+=g,"currency"===p&&_>d&&(e.hasInsufficientSubscriptionCredits=!0,e.hasLowDebitableBalance=!1,e.insufficientAmount=_-d),e.hasLowDebitableBalance=(0,F.I)({canShowLedgerLowBalance:r,hasInsufficientSubscriptionCredits:e.hasInsufficientSubscriptionCredits,units:u,amount:d,initialCommitment:c}),e},n)},T=t(22207),C=t(48007),G=t(85076),k=t(60325),w=t(30682),q=t(57160),R=t(62430),$=t(67666),z=t(16319),O=t(55790),U=t(21075),x=t(31950),N=t(93251),P=t(12482),D=t(81278),V=t(55729),M=t(26988),L=t(98848),E=t(30721),B="Size limit warning",J=e=>{var a,{item:t,subscriptions:r}=e,{itemType:n,metadata:i}=t,s=(0,b.Q)({asset:t}),o=null==i?void 0:null===(a=i.cart)||void 0===a?void 0:a.licenseId,{allSubscriptions:m}=r;switch(n){case d.G_:return(0,q.d)({licenseName:o,subscriptions:m});case d.FY:case d.M9:case d.W1:default:return(0,k.A)({licenseName:o,subscriptions:m,assetType:n,contentTier:s})}},j=e=>{var a,t,{item:r}=e;return(null===(a=r.largeThumb)||void 0===a?void 0:a.url)||(null===(t=r.preview)||void 0===t?void 0:t.url)||r.preview||r.thumb||""},H=e=>{var a,{asset:t}=e;return t.itemType===d.W1&&!t.sizes&&!(null===(a=t.metadata)||void 0===a?void 0:a.cart.sizes)},W=e=>{var a,t,{item:r}=e,s=(0,b.$9)(r);if(r.itemType===d.m$){var o,m,l,u,p,g,_,y,v,f,I,S=null==r?void 0:null===(y=r.product)||void 0===y?void 0:null===(_=y.productPreviews[0])||void 0===_?void 0:null===(g=_.previewThumbnailImages)||void 0===g?void 0:g.find(e=>{var{resolution:a}=e;return"res600x600"===a}),F={[c.jx]:{height:600,width:600,src:"https://".concat(null==S?void 0:null===(v=S.assetFile)||void 0===v?void 0:v.s3Path)}};return{[c.jx]:{height:600,width:600,src:(0,h.c0)((0,i._)((0,n._)({},r),{angle:null==r?void 0:null===(I=r.metadata)||void 0===I?void 0:null===(f=I.cart)||void 0===f?void 0:f.angle,displays:F}))}}}return s?{[c.pI]:{height:r.height||(null===(a=r.preview)||void 0===a?void 0:a.height),width:r.width||(null===(t=r.preview)||void 0===t?void 0:t.width),src:r.preview||r.thumb}}:{[c.jx]:{height:(null===(o=r.largeThumb)||void 0===o?void 0:o.height)||(null===(m=r.preview)||void 0===m?void 0:m.height),width:(null===(l=r.largeThumb)||void 0===l?void 0:l.width)||(null===(u=r.preview)||void 0===u?void 0:u.width),src:null===(p=r.preview)||void 0===p?void 0:p.url}}},Y=e=>{var a,t,r,s,o,m,l,u,p,_,y,f,I,{item:b,price:h,priceType:S,currency:F,subscriptionId:A,hasCreditsRemaining:T,isUnlimited:C,isUnavailableSubscription:G}=e,k=W({item:b}),w=j({item:b}).replace("-150nw","-260nw")||(null==k?void 0:null===(a=k[c.jx])||void 0===a?void 0:a.src),q=null===(t=b.assets)||void 0===t?void 0:t.find(e=>{var{assetClass:a}=e;return a===g.Iw}),R=[d.m$,d.W1].includes(b.itemType)&&!b.src,$=null===(r=b.meta)||void 0===r?void 0:r.search_context;return(null===(o=b.metadata)||void 0===o?void 0:null===(s=o.cart)||void 0===s?void 0:s.searchContext)&&($=(0,v.fF)({trackingId:null===(_=b.metadata)||void 0===_?void 0:null===(p=_.cart)||void 0===p?void 0:null===(u=p.searchContext)||void 0===u?void 0:u.searchTrackingId,searchTerm:null===(I=b.metadata)||void 0===I?void 0:null===(f=I.cart)||void 0===f?void 0:null===(y=f.searchContext)||void 0===y?void 0:y.searchTerm})),(0,n._)((0,i._)((0,n._)((0,i._)((0,n._)({},b),{id:b.itemId}),[d.W1,d.m$,d.uH,d.rr].some(e=>e===b.itemType)&&{image:{id:b.itemId,categories:b.categories,description:b.description||b.subhead||"",url:w,isEditorial:!!b.isEditorial,isPremium:!!b.isPremium,displays:k,permalink:b.permalink,isIllustration:b.isIllustration,isVector:b.isVector}}),{type:b.itemType,isFootageSelect:b.footageSelect,price:h,priceType:S,waveformPng:b.waveformPng||(null==q?void 0:q.externalUrl),currency:F,licenseId:(null===(l=b.metadata)||void 0===l?void 0:null===(m=l.cart)||void 0===m?void 0:m.licenseId)||"",subscriptionId:A,hasCreditsRemaining:T,isPixelSquid:b.itemType===d.m$,isUnavailableAsset:H({asset:b}),isUnlimited:C,isUnavailableSubscription:G,meta:(0,n._)({},$?{search_context:$}:{})}),R&&{src:w})},K=e=>{var{cartItems:a=[],subscriptions:t}=e;return a.filter(e=>[d.W1,d.m$,d.G_,d.FY,d.M9,d.uH,d.rr].includes(e.itemType)).map(e=>{var a=J({item:e,subscriptions:t}),{price:r=0,priceType:n=_.EV}=(0,w.q)({uniqueSubscription:a});return Y({item:e,price:r,priceType:n,currency:(null==a?void 0:a.creditCurrency)||"",subscriptionId:(null==a?void 0:a.id)||"-",isUnavailableSubscription:!a,hasCreditsRemaining:(0,T.X)({subscription:a}),isUnlimited:(0,C.t)({subscription:a})})})},Q=e=>{var{isPrimary:a,isLedger:t=!1}=e;return(0,o.Xl)((0,n._)({urlParams:{isPrimary:a}},t&&{queryParams:{isLedger:t}})).formattedUrl},Z=e=>{var{isPrimary:a}=e,t=(0,N.jE)(),s=(0,E.i9)(),{data:o}=(0,O.R7)(),m=Q({isPrimary:a}),{data:l,error:c,isLoading:d}=(0,P.I)({queryKey:[m],enabled:!!(s&&o),queryFn:()=>x.C2.get(m).then(e=>{var{data:a}=e;return a&&(0,i._)((0,n._)({},a),{items:K({cartItems:a.items,subscriptions:o})})}).catch(e=>{var a,t;throw null===(t=window.NREUM)||void 0===t||null===(a=t.recordCustomEvent)||void 0===a||a.call(t,y.s,{url:m,errorMessage:e.message,errorStack:e.stack}),e})});return{data:l,error:c,isLoading:d,mutate:function(){var e=(0,r._)(function*(e){return e?t.setQueryData([m],e):t.invalidateQueries({queryKey:[m]})});return function(a){return e.apply(this,arguments)}}()}},X=e=>{var{isPrimary:a}=e,t=(0,N.jE)(),s=(0,E.i9)(),o=Q({isPrimary:a,isLedger:!0}),{data:m}=(0,P.I)({queryKey:[o],enabled:s,queryFn:()=>x.C2.get(o).then(e=>{var{data:a}=e;return a&&(0,i._)((0,n._)({},a),{items:a.items.filter(e=>[d.W1,d.m$,d.G_,d.FY,d.M9,d.uH,d.rr].includes(e.itemType))})}).catch(e=>{var a,t;throw null===(t=window.NREUM)||void 0===t||null===(a=t.recordCustomEvent)||void 0===a||a.call(t,y.s,{url:o,errorMessage:e.message,errorStack:e.stack}),e})});return{data:m,mutate:function(){var e=(0,r._)(function*(e){return e?t.setQueryData([o],e):t.invalidateQueries({queryKey:[o]})});return function(a){return e.apply(this,arguments)}}()}},ee=e=>{var{cartItems:a=[],assetEligibleSubscriptions:t}=e;return a.map(e=>{var a,{id:r,itemType:n,metadata:{cart:{licenseId:i}={}}={}}=null!=e?e:{},s=(0,R.S)({assetType:n,subscriptions:null==t?void 0:null===(a=t[r])||void 0===a?void 0:a.licenseSubscriptions,selectedLicenseId:i}),{price:o=0,priceType:m=_.EV}=(0,w.b)({uniqueSubscription:s});return Y({item:e,price:o,priceType:m,currency:(null==s?void 0:s.currency)||(null==s?void 0:s.creditCurrency)||"",subscriptionId:(null==s?void 0:s.id)||"-",isUnavailableSubscription:!s,hasCreditsRemaining:!0,isUnlimited:(0,C.t)({subscription:s})})})},ea=()=>{var e,a=(0,N.jE)(),[t,s]=(0,V.useState)({status:"",error:void 0}),[c,g]=(0,V.useState)(!1),_=(0,V.useRef)(!1),{productAddedAnalyticsEvent:y,cartViewedAnalyticsEvent:v,productRemovedAnalyticsEvent:b}=(0,M.f)(),{getSearchContext:h}=(0,L.J)(),S=(0,D.useRouter)(),{queueIpReview:F}=(0,$.F)({trackingId:null===(e=h())||void 0===e?void 0:e.search_tracking_id}),A=(0,V.useCallback)(e=>{void 0===(null==e?void 0:e.cartId)||_.current||(_.current=!0,v(e))},[_,v]),T=(0,V.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(e=>{var{id:t}=e;return -1===a.findIndex(e=>{var{id:a}=e;return"".concat(t)==="".concat(a)})})},[]),C=(0,V.useCallback)(e=>{var{cartItems:a=[],itemsToAdd:t=[]}=e,r=[...a];return t.forEach(e=>{var a=(0,I.Qk)({asset:e}),t=r.findIndex(t=>{var{id:r,type:n}=t;return"".concat(r)==="".concat(e.id)&&n===a});t>-1?r[t]=(0,n._)({},e):r.unshift((0,i._)((0,n._)({},e),{addedTime:new Date}))}),r},[]),G=(0,V.useCallback)(function(){var e=(0,r._)(function*(e){var a,{items:t,licenseId:i,licenseAsJpeg:s}=e;return Promise.all(null==t?void 0:t.map((a=(0,r._)(function*(e){var a=(0,I.Qk)({asset:e}),t=i||e.licenseId,r=s||e.licenseAsJpeg,o=yield(0,f.og)({asset:e,licenseName:t});return{item_id:e.id,item_type:a,metadata:{cart:(0,n._)({license_id:t,license_as_jpeg:r,subscription_id:e.subscriptionId,size:o.content_size,format:o.content_format,sizes:(0,f.Rj)({asset:e}),search_context:h(e),source:[d.uH,d.rr].some(e=>e===a)?p.Au:""},a===d.m$&&{angle:o.angle})}}}),function(e){return a.apply(this,arguments)})))});return function(a){return e.apply(this,arguments)}}(),[h]),k=(0,V.useCallback)(function(){var e=(0,r._)(function*(e){var{cart:t,eventLabel:r,gridItems:c,isPrimary:d=!0,itemsToAdd:p,licenseId:_,formatType:v,licensePrice:f,mutateCart:I,withOptimisticUpdate:S=!0,pageSection:A,listId:T}=e;try{var k=p.map(e=>(0,i._)((0,n._)({},e),{meta:(0,n._)({search_context:h(e)},e.meta)}));s({status:"",error:void 0}),g(!1);var w=C({cartItems:t.items,itemsToAdd:k});if(w.length>u.Zm){s({status:m.Nz}),g(!0);return}S&&I(e=>(0,i._)((0,n._)({},e),{items:w}));var q=(0,o.bE)({urlParams:{isPrimary:d}}).formattedUrl,R=yield G({items:k,licenseId:_,licenseAsJpeg:v===l.kr});yield x.C2.post(q,R),s({status:m.qO}),F(p),d&&k.forEach(e=>{var a=t.items.find(a=>{var{id:t}=a;return"".concat(t)==="".concat(e.id)});a&&_!==a.licenseId&&b({cart:t,eventLabel:r,gridItems:c,items:[e],matchingCartItem:a,pageSection:A}),y({cart:t,eventLabel:r,gridItems:c,items:[e],licenseId:_,licensePrice:f,pageSection:A,listId:T})})}catch(e){s({status:m.Nz,error:e})}finally{yield a.invalidateQueries({queryKey:[Q({isPrimary:d,isLedger:!0})]}),yield a.invalidateQueries({queryKey:[Q({isPrimary:d})]})}});return function(a){return e.apply(this,arguments)}}(),[C,G,h,y,b,a,F]),w=(0,V.useCallback)(function(){var e=(0,r._)(function*(e){var{cartData:t,eventLabel:r,gridItems:s,isPrimary:m=!0,itemsToRemove:l=[],mutateCart:c,pageSection:d,routePathProps:u,withOptimisticUpdate:p=!0,mutateCallback:g}=e;try{p&&c(e=>(0,i._)((0,n._)({},e),{items:T(e.items,l)}),!1);var _=(0,o.dt)({urlParams:{isPrimary:m}}).formattedUrl;yield x.C2.delete(_,{data:l.map(e=>({item_id:e.id,item_type:(0,I.Qk)({asset:e})}))}),m&&b({cart:t,eventLabel:r,gridItems:s,items:l,pageSection:d}),u&&S.push(...u)}catch(e){}finally{g?g({isPrimary:m}):(yield a.invalidateQueries({queryKey:[Q({isPrimary:m,isLedger:!0})]}),yield a.invalidateQueries({queryKey:[Q({isPrimary:m})]}))}});return function(a){return e.apply(this,arguments)}}(),[T,b,S,a]);return{triggerCartViewedEvent:A,addCartItems:k,removeCartItems:w,moveToSaveForLater:(0,V.useCallback)(function(){var e=(0,r._)(function*(e){var{eventLabel:a,itemsToMove:t,pageSection:r,primaryCart:l,savedForLaterCart:c,mutatePrimaryCart:d,mutateSavedForLaterCart:p}=e;s({status:"",error:void 0}),g(!1);var _=C({cartItems:c.items,itemsToAdd:t});if(_.length>u.Zm)throw s({status:m.Nz}),g(!0),Error(B);d(e=>(0,i._)((0,n._)({},e),{items:T(e.items,t)}),!1),p(e=>(0,i._)((0,n._)({},e),{items:_}),!1);var y=(0,o.cb)({urlParams:{fromCartType:u.jT,toCartType:u.pw}}).formattedUrl,v=yield G({items:t});yield x.C2.post(y,v),b({cart:l,eventLabel:a,items:t,pageSection:r})});return function(a){return e.apply(this,arguments)}}(),[C,G,b,T]),moveToPrimary:(0,V.useCallback)(function(){var e=(0,r._)(function*(e){var{itemsToMove:a,primaryCart:t,mutatePrimaryCart:r,mutateSavedForLaterCart:l}=e;s({status:"",error:void 0}),g(!1);var c=C({cartItems:t.items,itemsToAdd:a});if(c.length>u.Zm)throw s({status:m.Nz}),g(!0),Error(B);l(e=>(0,i._)((0,n._)({},e),{items:T(e.items,a)})),r(e=>(0,i._)((0,n._)({},e),{items:c}));var d=(0,o.cb)({urlParams:{fromCartType:u.pw,toCartType:u.jT}}).formattedUrl,p=yield G({items:a});yield x.C2.post(d,p),y({cart:t,items:a})});return function(a){return e.apply(this,arguments)}}(),[C,G,y,T]),addToCartStatus:t,setAddToCartStatus:s,isSizeLimitWarning:c}},et=e=>{var{cartItems:a}=e,{data:t}=(0,O.R7)(),r=(0,U.h)(),{isLoading:n}=r,i=(0,s._)(r,["isLoading"]),o=(e=>{var{items:a}=e;return null==a?void 0:a.some(e=>{var{hasCreditsRemaining:a}=e;return!a})})({items:a}),{amountType:m,hasInsufficientSubscriptionCredits:l,insufficientAmount:c,hasLowDebitableBalance:d}=(0,G.E)({items:a,isLoading:!t||n,subscriptions:t,userCapabilities:i});return{amountType:m,isDebitableUser:(0,S.fY)({userCapabilities:i}),userCanViewDebitableBalance:(0,S.Pl)({userCapabilities:i}),hasInsufficientCartItemsCredits:o,hasInsufficientSubscriptionCredits:l,insufficientAmount:c,hasLowDebitableBalance:d}},er=e=>{var{items:a}=e;return null==a?void 0:a.some(e=>{var{hasCreditsRemaining:a}=e;return!a})},en=e=>{var{cartItems:a,assetEligibleSubscriptions:t}=e,r=(0,U.h)(),{isLoading:n}=r,i=(0,s._)(r,["isLoading"]),o=(0,z.k)();if(n)return{};var m=er({items:a}),{hasInsufficientSubscriptionCredits:l,insufficientAmount:c,hasLowDebitableBalance:d,amountType:u}=A({items:a,assetEligibleSubscriptions:t,canShowLedgerLowBalance:o})||{};return{amountType:u,isDebitableUser:(0,S.fY)({userCapabilities:i}),userCanViewDebitableBalance:(0,S.Pl)({userCapabilities:i}),hasInsufficientCartItemsCredits:m,hasInsufficientSubscriptionCredits:l,insufficientAmount:c,hasLowDebitableBalance:d}}},67666:(e,a,t)=>{t.d(a,{F:()=>v});var r=t(51220),n=t(87011),i=t(93096),s=t(90801),o=t(22980),m=t(98917),l=t(86380),c=t(23069),d=t(46131),u=t(29862),p=t(91894),g=function(){var e=(0,r._)(function*(e){var{items:a,trackingId:t}=e;0!==a.length&&(yield(0,p.A)("/message-gateway/ip-review",(0,i._)((0,n._)({method:"POST",requireAuth:!0},(0,u.H)({trackingId:t})),{body:{media:a.map(e=>({mediaId:e}))}})))});return function(a){return e.apply(this,arguments)}}(),_=t(93251),y=t(55729),v=function(){var e,{trackingId:a="",updateRequestCache:t,onComplete:u=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=(0,d.s)("/"),{isBrandEnterprise:v,brand:f}=(0,c.P)(),I=(0,_.jE)();return{queueIpReview:(0,y.useCallback)((e=(0,r._)(function*(e){if(v){var r,c,d=Array.isArray(e)?e:[e],_=d.reduce((e,a)=>(0,m.iu)(a)?[...e,String(a.id)]:e,[]);if(_.length){var y=(yield I.fetchQuery({queryKey:(0,l.IF)({assetIds:_}),queryFn:e=>{var{queryKey:a}=e;return(0,l.tz)(p,a)}})).reduce((e,a)=>(null==a?void 0:a.isIpReviewed)===!1&&(null==a?void 0:a.ipReviewStatus)!==o.eG?[...e,a]:e,[]);try{if(y.length){yield g({items:y.map(e=>null==e?void 0:e.classicId),trackingId:a});var b=y.map(e=>(I.setQueryData(e.queryKey,[(0,i._)((0,n._)({},e),{isIpReview:!1,ipReviewStatus:o.eG})]),I.invalidateQueries({queryKey:e.queryKey,predicate:a=>{var{queryKey:t}=a;return t===e.queryKey}}))),{formattedRequest:h}=(0,s.Nz)({brand:f,experiments:{},assetId:""}),S=I.invalidateQueries({exact:!1,queryKey:[(0,i._)((0,n._)({},h),{variables:{},headers:{}})],refetchType:"active",predicate:()=>!0});yield Promise.all([...t?[t({reviewStatus:o.eG})]:[],...b,S]),u(d)}}catch(e){null===(c=window.NREUM)||void 0===c||null===(r=c.noticeError)||void 0===r||r.call(c,e,{message:"Error adding assets to queue for IP review: ".concat(y.map(e=>null==e?void 0:e.classicId).join(", "),"\ntrackingId: ").concat(a)})}}}}),function(a){return e.apply(this,arguments)}),[f,v,I,p,a,t,u])}}},68958:(e,a,t)=>{t.d(a,{I:()=>n});var r=t(30500),n=e=>{var{canShowLedgerLowBalance:a,hasInsufficientSubscriptionCredits:t=!1,units:n,amount:i,initialCommitment:s}=e;if(t)return!1;var o=r.Gy[n];return a&&o?Number(i)<=o:Number(i)<=Number(s)*r.O7}},73681:(e,a,t)=>{t.d(a,{z:()=>k,k:()=>w});var r=t(51220),n=t(6029),i=t(66092),s=t(13304),o=t(55729),m=t(87011),l=t(92424),c=t(36640),d=t(71024),u=t.n(d),p=u()(()=>Promise.all([t.e(27510),t.e(72076),t.e(69108),t.e(97300),t.e(77618),t.e(43366),t.e(23100),t.e(76191),t.e(27273)]).then(t.bind(t,95695)).then(e=>({default:e.AddToCartDialog})),{loadableGenerated:{webpack:()=>[95695]},ssr:!1}),g=u()(()=>Promise.all([t.e(27510),t.e(72076),t.e(69108),t.e(97300),t.e(77618),t.e(43366),t.e(23100),t.e(76191),t.e(27273),t.e(49414)]).then(t.bind(t,63882)).then(e=>({default:e.AddToCartDialogLedger})),{loadableGenerated:{webpack:()=>[63882]},ssr:!1}),_=e=>{var{isActive:a}=e,t=(0,l._)(e,["isActive"]),r=(0,s.G)(a),i=(0,c.A)();return r&&(0,n.jsx)(i?g:p,(0,m._)({isActive:a},t))},y=t(93096),v=t(26114),f=t(78586),I=t(70235),b=t(48973),h=t(14264),S=t(43765),F=t(23069),A=t(68880),T=e=>{var{status:a,isSizeLimitWarning:t,alertLabels:r}=e;return t?r.sizeLimitWarning:a===b.qO?r.addToCartSuccess:r.addToCartWarning},C=e=>{var{isOpen:a,isSizeLimitWarning:t=!1,addToCartStatus:r,snackBarActionAllowed:i=!0,handleSnackbarClose:s}=e,{t:o}=(0,A.Bd)(v.evH),{status:l,error:c}=r,d={addToCartSuccess:o("common:actions_added_to_cart"),addToCartWarning:o("notifications:label_add_to_cart_failure"),sizeLimitWarning:o("ent:cart_size_limit_warning",{LIMIT:h.Zm}),viewActionLabel:o("common:actions_view")},u=T({status:l,isSizeLimitWarning:t,alertLabels:d}),{isBrandEnterprise:p}=(0,F.P)(),{viewCartAction:g}=(0,f.Z)(),_=(0,S.Y)(),C={onClick:()=>{s(),p?_():g()},label:d.viewActionLabel};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(I.DynamicSnackbar,(0,y._)((0,m._)({},r.status===b.qO&&i&&{alertAction:C}),{alertSeverity:l,error:c,handleSnackbarClose:s,isOpen:a&&!!l,message:u}))})},G={status:"",error:void 0},k=e=>{var{addToCartStatus:a=G,assets:t=null,eventLabel:r,gridItems:i=null,isAddToCartDialogActive:o,isPrimary:m,isSnackBarOpen:l,isSizeLimitWarning:c,onAddToCart:d,onAlertSnackbarClose:u,setIsAddToCartDialogActive:p,pageSection:g,listId:y,snackBarActionAllowed:v=!0}=e;return(0,s.G)(t)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_,{assets:t,eventLabel:r,gridItems:i,isActive:o,isPrimary:m,listId:y,onAddToCart:d,pageSection:g,setIsActive:p}),(0,n.jsx)(C,{snackBarActionAllowed:v,addToCartStatus:a,handleSnackbarClose:u,isOpen:l,isSizeLimitWarning:c})]}):null},w=function(){var e,a,{withOptimisticUpdate:t=!0,setIsVerifying:n,snackBarActionAllowed:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[m,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),[u,p]=(0,o.useState)(null),[g,_]=(0,o.useState)(null),[y,v]=(0,o.useState)(!0),[f,I]=(0,o.useState)(null),[b,h]=(0,o.useState)(null),[S,F]=(0,o.useState)(null),{addCartItems:A,moveToSaveForLater:T,moveToPrimary:C,addToCartStatus:G,isSizeLimitWarning:w,notAddedSelectVideos:q}=(0,i.Nc)();(0,o.useEffect)(()=>()=>p(null),[]);var R=(0,o.useCallback)(e=>{var{assets:a,eventLabel:r,licenseId:i,formatType:s,licensePrice:o,cart:m,mutateCart:l,notAddedSelectVideoIds:c,pageSection:p,listId:_}=e;null==n||n(!0),d(!0),A({cart:m,eventLabel:r,gridItems:g,isPrimary:y,itemsToAdd:a||u,licenseId:i,formatType:s,licensePrice:o,mutateCart:l,notAddedSelectVideoIds:c,withOptimisticUpdate:t,pageSection:p,listId:_})},[u,g,A,y,n,t]),$=(0,o.useCallback)((e=(0,r._)(function*(e){var{itemsToMove:a,primaryCart:t,mutatePrimaryCart:r,mutateSavedForLaterCart:i}=e;null==n||n(!0),d(!0);try{yield C({itemsToMove:a,primaryCart:t,mutatePrimaryCart:r,mutateSavedForLaterCart:i})}catch(e){null==n||n(!1)}}),function(a){return e.apply(this,arguments)}),[C,n]),z=(0,o.useCallback)((a=(0,r._)(function*(e){var{itemsToMove:a,primaryCart:t,savedForLaterCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:s}=e;null==n||n(!0),d(!0);try{yield T({itemsToMove:a,primaryCart:t,savedForLaterCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:s})}catch(e){null==n||n(!1)}}),function(e){return a.apply(this,arguments)}),[T,n]);return{addToCartViewsProps:(0,o.useMemo)(()=>({addToCartStatus:G,assets:u,eventLabel:S,gridItems:g,isAddToCartDialogActive:m,isPrimary:y,isSizeLimitWarning:w,isSnackBarOpen:c,onAddToCart:R,onAlertSnackbarClose:()=>d(!1),notAddedSelectVideos:q,setIsAddToCartDialogActive:l,pageSection:f,listId:b,snackBarActionAllowed:s}),[u,g,G,S,b,f,m,y,w,c,q,R,s]),addToCartViewsHandler:(0,o.useCallback)(e=>{var{assets:a,eventLabel:t,gridItems:r,isMoveToPrimaryCart:n=!1,isMoveToSavedForLaterCart:i=!1,isPrimaryCart:s=!0,mutatePrimaryCart:o,mutateSavedForLaterCart:m,primaryCart:c,savedForLaterCart:d,withDialog:u=!0,licenseId:g,licensePrice:y,pageSection:f,listId:b}=e;if(p(a),v(s),I(f),F(t),h(b),r&&_(r),n){$({itemsToMove:a,primaryCart:c,mutatePrimaryCart:o,mutateSavedForLaterCart:m});return}if(i){z({itemsToMove:a,primaryCart:c,savedForLaterCart:d,mutatePrimaryCart:o,mutateSavedForLaterCart:m});return}u?l(!0):R({assets:a,eventLabel:t,cart:c,licenseId:g,licensePrice:y,mutateCart:o,pageSection:f})},[R,$,z]),AddToCartViews:k}}},85076:(e,a,t)=>{t.d(a,{E:()=>o});var r=t(30500),n=t(71335),i=t(10545),s=t(3399),o=e=>{var a,{items:t,isLoading:o,subscription:m,subscriptions:l,userCapabilities:c}=e;return o?{}:(m&&(a=m.creditType),l&&l.length>0&&(a=l[0].creditType),(0,n.fY)({userCapabilities:c})?(0,s.h)({items:t,subscription:m,subscriptions:l,hasWrapperSubscription:(0,n.GT)({userCapabilities:c})}):{amountType:a||r.EV,hasLowDebitableBalance:!1,hasInsufficientSubscriptionCredits:m&&0===(0,i.J)({subscription:m}),insufficientAmount:null})}},90801:(e,a,t)=>{t.d(a,{EH:()=>N,Nz:()=>x,D3:()=>z,lp:()=>D,Cn:()=>O,qE:()=>U,P5:()=>P,Z2:()=>M,LV:()=>V});var r=t(87011),n=t(63609);let i=JSON.parse('{"id":"32cd42c0f658e4328d24f4f816722b29c69a85ea1d35b562f1c411d77eca2580","type":"mutation","name":"ApplyTransparencyMask","source":"mutation ApplyTransparencyMask($sourceAssetId:SourceAssetId!,$mask:String!,$maskType:MaskType!){initiateGenerationResponse:applyTransparencyMask(sourceAssetId:$sourceAssetId mask:$mask maskType:$maskType){data{...TrackingResponseFragment __typename}problems{__typename message}__typename}}fragment TrackingResponseFragment on TrackingResponse{trackingId{svc uuid __typename}__typename}"}'),s=JSON.parse('{"id":"3e8512ec304af5f86006e05da8b81453a88c174bee15734d829c32857aaadc95","type":"mutation","name":"GenerateImageInpainting","source":"mutation GenerateImageInpainting($sourceAssetId:SourceAssetId!,$limit:Int!,$mask:String!,$maskType:MaskType!,$text:String){initiateGenerationResponse:generateImageInpainting(sourceAssetId:$sourceAssetId limit:$limit mask:$mask maskType:$maskType text:$text){data{...TrackingResponseFragment __typename}problems{__typename message}__typename}}fragment TrackingResponseFragment on TrackingResponse{trackingId{svc uuid __typename}__typename}"}'),o=JSON.parse('{"id":"e69c542448400b3e764d11d0ebdbbc3ea820d84f4a5101f6dc895fab16d542d7","type":"mutation","name":"GenerateImageVariations","source":"mutation GenerateImageVariations($sourceAssetId:SourceAssetId!,$limit:Int!){initiateGenerationResponse:generateImageVariations(sourceAssetId:$sourceAssetId limit:$limit){data{...TrackingResponseFragment __typename}problems{__typename message}__typename}}fragment TrackingResponseFragment on TrackingResponse{trackingId{svc uuid __typename}__typename}"}'),m=JSON.parse('{"id":"0cb9d769f32751cb4d8a8c14fbe3a503b52ef9ec1988648f9e427ea018065029","type":"mutation","name":"InitiateTextToImageGeneration","source":"mutation InitiateTextToImageGeneration($formatId:GeneratedImageFormatId,$limit:Int!,$text:String!,$additionalOptions:JSONObject,$aspectRatio:GeneratedImageAspectRatio,$language:String,$locale:String,$styleId:ID,$referenceImages:[ReferenceImageInput!]){initiateGenerationResponse:generateImagesFromText(formatId:$formatId limit:$limit text:$text additionalOptions:$additionalOptions aspectRatio:$aspectRatio language:$language locale:$locale styleId:$styleId referenceImages:$referenceImages){data{...TrackingResponseFragment __typename}problems{__typename message}__typename}}fragment TrackingResponseFragment on TrackingResponse{trackingId{svc uuid __typename}__typename}"}'),l=JSON.parse('{"id":"e2be9babadfc364acb1207f1a0eac2c6e9f705f6440a8e7ed0a82dc7ec64ffd6","type":"mutation","name":"GenerateImageZoomOut","source":"mutation GenerateImageZoomOut($sourceAssetId:SourceAssetId!,$limit:Int!,$additionalOptions:JSONObject){initiateGenerationResponse:generateZoomedOutImages(sourceAssetId:$sourceAssetId limit:$limit additionalOptions:$additionalOptions){data{...TrackingResponseFragment __typename}problems{__typename message}__typename}}fragment TrackingResponseFragment on TrackingResponse{trackingId{svc uuid __typename}__typename}"}'),c=JSON.parse('{"id":"1144edab98928ff1db32609ce35dfbac69b57c3ed348124120ec3e44e110d6b9","type":"query","name":"fetchGeneratedImageReviewStatus","source":"query fetchGeneratedImageReviewStatus($assetId:ID!){generatedAsset(assetId:$assetId){data{...on GeneratedImage{registeredImage{isIpReviewed referenceIds{name namespace value __typename}__typename}__typename}__typename}__typename}}"}'),d=JSON.parse('{"id":"80d19f674a4781166a72c828128fd7e24fe415b3f192535dd67f7e86d0e7726f","type":"query","name":"fetchGenerationHistory","source":"query fetchGenerationHistory($request:AssetGenerationHistoryInput,$language:String){generationHistory(request:$request){data{...GenerationStatusFragment requestTime __typename}paginationInfo{currentPage totalPages totalCount __typename}__typename}}fragment GenerationStatusFragment on AssetGenerationStatus{assets{...GeneratedAssetV2Fragment __typename}errorCode generationMetadata{...GenerationMetadataFragment __typename}registrationEligibility{canRegister originalImage{...SourceAssetFragment __typename}__typename}status trackingId{...TrackingIdFragment __typename}__typename}fragment GeneratedAssetV2Fragment on GeneratedAssetV2{...on GeneratedImage{...GeneratedImageFragment __typename}__typename}fragment GeneratedImageFragment on GeneratedImage{id displayPrompt position small{...GeneratedImageSourceFragment __typename}styles{...StyleBasicFragment __typename}watermarked{...GeneratedImageSourceFragment __typename}__typename}fragment GeneratedImageSourceFragment on GeneratedImageSource{src height width __typename}fragment StyleBasicFragment on GeneratedImageStyle{id format{...FormatFragment __typename}name(language:$language)exemplarAsset{thumbnailImageUrlTemplate __typename}__typename}fragment FormatFragment on GeneratedImageFormat{id name(language:$language)__typename}fragment GenerationMetadataFragment on GenerationMetadata{__typename...on TextToImageGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}referenceImages{image{...SourceAssetFragment __typename}type __typename}style{...StyleBasicFragment __typename}text __typename}...on ImageVariationGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}sourceAsset{...SourceAssetFragment __typename}style{...StyleBasicFragment __typename}text __typename}...on ZoomedOutImageGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}sourceAsset{...SourceAssetFragment __typename}style{...StyleBasicFragment __typename}text __typename}...on InpaintingImageGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}sourceAsset{...SourceAssetFragment __typename}style{...StyleBasicFragment __typename}text __typename}...on ImageRemoveObjectsGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}sourceAsset{...SourceAssetFragment __typename}style{...StyleBasicFragment __typename}__typename}...on ApplyTransparencyMaskGenerationMetadata{additionalOptions sourceAsset{...SourceAssetFragment __typename}__typename}}fragment AspectRatioFragment on GeneratedImageAspectRatioResponse{id name(language:$language)__typename}fragment SourceAssetFragment on SourceAssetImage{__typename...on GeneratedAsset{...GeneratedAssetFragment __typename}...on GeneratedImage{...GeneratedImageFragment __typename}...on CreativeImage{...CreativeImageFragment __typename}...on UserImage{...UserImageFragment __typename}}fragment GeneratedAssetFragment on GeneratedAsset{id displayPrompt small{...ImageSourceSizeFragment __typename}styles{...StyleBasicFragment __typename}watermarked{...ImageSourceSizeFragment __typename}__typename}fragment ImageSourceSizeFragment on AssetSource{src height width __typename}fragment CreativeImageFragment on CreativeImage{__typename classicId description isAdult isIllustration isVector is3dSpinner isGenerated channels contentTier{id __typename}thumbnailImageUrlTemplate secureWatermarkImageUrl sellableImageSizes{...on SellableCreativeImageJpgSize{...SellableCreativeImageJpgSizeFragment __typename}...on SellableCreativeImageVectorSize{...SellableCreativeImageVectorSizeFragment __typename}__typename}aspect metadataStatus{mainStatus qualifierStatus __typename}keywords}fragment SellableCreativeImageJpgSizeFragment on SellableCreativeImageJpgSize{__typename name displayName format dpi height{inchesLabel centimetersLabel pixels __typename}width{inchesLabel centimetersLabel pixels __typename}}fragment SellableCreativeImageVectorSizeFragment on SellableCreativeImageVectorSize{__typename name displayName format}fragment UserImageFragment on UserImage{__typename productId height width thumbnailUrl imageVariants{size500 size1500 __typename}}fragment TrackingIdFragment on TrackingId{svc uuid __typename}"}'),u=JSON.parse('{"id":"b177bef68723d966815492219b8db0a87282f722dd885ee6cd23c9ccd9128d46","type":"query","name":"fetchGenerationResults","source":"query fetchGenerationResults($id:String!,$language:String){generationStatus(trackingId:{uuid:$id}){data{...GenerationStatusFragment __typename}problems{__typename message}__typename}}fragment GenerationStatusFragment on AssetGenerationStatus{assets{...GeneratedAssetV2Fragment __typename}errorCode generationMetadata{...GenerationMetadataFragment __typename}registrationEligibility{canRegister originalImage{...SourceAssetFragment __typename}__typename}status trackingId{...TrackingIdFragment __typename}__typename}fragment GeneratedAssetV2Fragment on GeneratedAssetV2{...on GeneratedImage{...GeneratedImageFragment __typename}__typename}fragment GeneratedImageFragment on GeneratedImage{id displayPrompt position small{...GeneratedImageSourceFragment __typename}styles{...StyleBasicFragment __typename}watermarked{...GeneratedImageSourceFragment __typename}__typename}fragment GeneratedImageSourceFragment on GeneratedImageSource{src height width __typename}fragment StyleBasicFragment on GeneratedImageStyle{id format{...FormatFragment __typename}name(language:$language)exemplarAsset{thumbnailImageUrlTemplate __typename}__typename}fragment FormatFragment on GeneratedImageFormat{id name(language:$language)__typename}fragment GenerationMetadataFragment on GenerationMetadata{__typename...on TextToImageGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}referenceImages{image{...SourceAssetFragment __typename}type __typename}style{...StyleBasicFragment __typename}text __typename}...on ImageVariationGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}sourceAsset{...SourceAssetFragment __typename}style{...StyleBasicFragment __typename}text __typename}...on ZoomedOutImageGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}sourceAsset{...SourceAssetFragment __typename}style{...StyleBasicFragment __typename}text __typename}...on InpaintingImageGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}sourceAsset{...SourceAssetFragment __typename}style{...StyleBasicFragment __typename}text __typename}...on ImageRemoveObjectsGenerationMetadata{additionalOptions aspectRatio{...AspectRatioFragment __typename}format{...FormatFragment __typename}sourceAsset{...SourceAssetFragment __typename}style{...StyleBasicFragment __typename}__typename}...on ApplyTransparencyMaskGenerationMetadata{additionalOptions sourceAsset{...SourceAssetFragment __typename}__typename}}fragment AspectRatioFragment on GeneratedImageAspectRatioResponse{id name(language:$language)__typename}fragment SourceAssetFragment on SourceAssetImage{__typename...on GeneratedAsset{...GeneratedAssetFragment __typename}...on GeneratedImage{...GeneratedImageFragment __typename}...on CreativeImage{...CreativeImageFragment __typename}...on UserImage{...UserImageFragment __typename}}fragment GeneratedAssetFragment on GeneratedAsset{id displayPrompt small{...ImageSourceSizeFragment __typename}styles{...StyleBasicFragment __typename}watermarked{...ImageSourceSizeFragment __typename}__typename}fragment ImageSourceSizeFragment on AssetSource{src height width __typename}fragment CreativeImageFragment on CreativeImage{__typename classicId description isAdult isIllustration isVector is3dSpinner isGenerated channels contentTier{id __typename}thumbnailImageUrlTemplate secureWatermarkImageUrl sellableImageSizes{...on SellableCreativeImageJpgSize{...SellableCreativeImageJpgSizeFragment __typename}...on SellableCreativeImageVectorSize{...SellableCreativeImageVectorSizeFragment __typename}__typename}aspect metadataStatus{mainStatus qualifierStatus __typename}keywords}fragment SellableCreativeImageJpgSizeFragment on SellableCreativeImageJpgSize{__typename name displayName format dpi height{inchesLabel centimetersLabel pixels __typename}width{inchesLabel centimetersLabel pixels __typename}}fragment SellableCreativeImageVectorSizeFragment on SellableCreativeImageVectorSize{__typename name displayName format}fragment UserImageFragment on UserImage{__typename productId height width thumbnailUrl imageVariants{size500 size1500 __typename}}fragment TrackingIdFragment on TrackingId{svc uuid __typename}"}'),p=JSON.parse('{"id":"dd7c4e0766944a9e2089eff96aed9775db5af508e5df61f95d6d4b91574afd27","type":"query","name":"fetchGenerativeAccountDetails","source":"query fetchGenerativeAccountDetails($requestTypes:[GenerationType!]){generativeAccountDetails{data{credits{...GenerativeCredits __typename}features(requestTypes:$requestTypes){data{requestType features{isPrivateGenerationsEnabled isProModeEnabled __typename}__typename}problems{...ProblemFragment __typename}__typename}__typename}problems{...ProblemFragment __typename}__typename}}fragment GenerativeCredits on GenerativeCreditsResponseWrapper{data{usesCredits creditsInfo{nextRenewalDate totalCreditsRemaining __typename}__typename}problems{...ProblemFragment __typename}__typename}fragment ProblemFragment on Problem{__typename message}"}'),g=JSON.parse('{"id":"b5eb1044b0d2af8cdaf7974f560e2bd898170a81a9b976946f7471b77dc26704","type":"query","name":"FetchGenerativeUpsellInfo","source":"query FetchGenerativeUpsellInfo{generativeUpsellInfo{data{purchasableProducts{...PurchasableProductsFragment __typename}upsellType __typename}problems{__typename message}__typename}}fragment PurchasableProductsFragment on GenerativeProductVariation{credits description extraInformation id name price prices{usd eur aud jpy gbp dkk chf sek rub brl cad krw nok sgd inr __typename}__typename}"}'),_=JSON.parse('{"id":"f3533d5ba9ab1903e354aa673a4d2c910ce97dc1747b95e0d44ce064612b23b9","type":"query","name":"fetchImageFormatsAndStyles","source":"query fetchImageFormatsAndStyles($size:Int,$language:String,$format:GeneratedImageFormatId!,$selectedStyles:[ID!]){generatedImageFormats{...FormatFragment __typename}generatedImageStyles(where:{formatId:$format,limit:$size,existingStyleIds:$selectedStyles}){...StyleBasicFragment __typename}}fragment FormatFragment on GeneratedImageFormat{id name(language:$language)__typename}fragment StyleBasicFragment on GeneratedImageStyle{id format{...FormatFragment __typename}name(language:$language)exemplarAsset{thumbnailImageUrlTemplate __typename}__typename}"}'),y=JSON.parse('{"id":"8b3053fe7980955724b2f22bd7abf82b007032731caa5784c63b445c77c2fe93","type":"query","name":"fetchThreeDUtilization","source":"query fetchThreeDUtilization($startDate:DateTime!,$endDate:DateTime!,$step:ThreeDUtilizationTimeUnit!,$apiClientIdList:[String!]){generationThreeDUtilization(request:{startDate:$startDate,endDate:$endDate,step:$step,api_client_id_list:$apiClientIdList}){usageBreakdown{date creditUtilization data{workflow mode usageSummary{totalRequests successfulRequests failedRequests averageResponseTimeMs __typename}creditUtilization __typename}__typename}__typename}}"}'),v=JSON.parse('{"id":"502c88b377a868a5528b64247c9f6bfaed73919e6baf4dce73a71292776e135c","type":"query","name":"fetchUpscalingStatus","source":"query fetchUpscalingStatus($assetId:AssetIdInput!){upscalingStatus(assetId:$assetId){data{status __typename}__typename}}"}');var f=t(17563),I=t(88010),b=t(78118),h=t(82281),{publicRuntimeConfig:{apiEndpoints:S}}=t.n(h)()(),{TextToImage:F,Variation:A,ZoomOut:T,InPaint:C,ImageRemoveObjects:G,ApplyTransparencyMask:k,TextTo_3D:w,ImageTo_3D:q}=f.jz,R={[F]:m.source,[A]:o.source,[T]:l.source,[C]:s.source,[k]:i.source,[G]:"",[w]:"",[q]:""},$=e=>{var{generationType:a}=e;return a===F?n.YY:n.BY},z=e=>{var{brand:a,experiments:t,generationId:i,headers:s,locale:o}=e,m=(0,r._)({id:i},o&&{language:o});return{query:u.source,variables:m,formattedRequest:{url:"".concat(S.graphGateway,"/graphql"),document:u.source,variables:m,requestHeaders:(0,r._)({},(0,b.C)({brand:a,experiments:t,page:"generate",appName:n.C3}),s)}}},O=e=>{var{brand:a,experiments:t,headers:i,generationType:s}=e,o=s?{requestType:s}:void 0;return{query:p.source,variables:o,formattedRequest:{url:"".concat(S.graphGateway,"/graphql"),document:p.source,variables:o,requestHeaders:(0,r._)({},(0,b.C)({brand:a,experiments:t,page:"generate",appName:n.C3}),i)}}},U=e=>{var{brand:a,experiments:t,headers:i}=e;return{query:g.source,variables:void 0,formattedRequest:{url:"".concat(S.graphGateway,"/graphql"),document:g.source,variables:void 0,requestHeaders:(0,r._)({},(0,b.C)({brand:a,experiments:t,page:"generate",appName:n.C3}),i)}}},x=e=>{var{assetId:a,brand:t,experiments:n,headers:i}=e,s={assetId:a};return{query:c.source,variables:s,formattedRequest:{url:"".concat(S.graphGateway,"/graphql"),document:c.source,variables:s,headers:(0,r._)({},(0,b.C)({brand:t,experiments:n,page:"generate"}),i)}}},N=e=>{var{brand:a,experiments:t,format:i,headers:s={},locale:o,selectedStyles:m,size:l}=e,c=(0,r._)({format:i&&i!==f.Jv.None?i:f.Jv.All,language:o},l?{size:l}:{},m?{selectedStyles:[].concat(m)}:{});return{query:_.source,variables:c,formattedRequest:{url:"".concat(S.graphGateway,"/graphql"),document:_.source,variables:c,requestHeaders:(0,r._)({},(0,b.C)({brand:a,experiments:t,page:"generate",appName:n.C3}),s),timeout:(0,I.NF)()?350:6e3}}},P=e=>{var{additionalOptions:a,aspectRatio:t,assetId:i,experiments:s,brand:o,format:m,generationType:l,headers:c={},limit:d,locale:u,mask:p,maskType:g,prompt:_,referenceImages:y,sourceAssetType:v,styles:I}=e,h=m||I||l!==f.jz.TextToImage?m:f.Jv.None,F=f.fz.GeneratedImage;v===f.fz.CreativeImage&&(F=f.fz.CreativeImage),v===f.fz.UserImage&&(F=f.fz.UserImage);var A=(0,r._)({limit:d||$({generationType:l})},_&&{text:_},u&&{language:u},h&&{formatId:h},I&&{styleId:I},t&&{aspectRatio:t},i&&{sourceAssetId:{id:i,type:F}},g&&{maskType:g},p&&{mask:p},a&&{additionalOptions:a},y&&{referenceImages:y}),T=R[l];return{query:T,variables:A,formattedRequest:{url:"".concat(S.graphGateway,"/graphql"),document:T,variables:A,requestHeaders:(0,r._)({},(0,b.C)({brand:o,experiments:s,page:"generate",appName:n.C3}),c)}}},D=e=>{var{experiments:a,limit:t,order:i,headers:s={},brand:o,appName:m=n.C3,locale:l,from:c}=e,u={request:{limit:t,order:i,status:f.HM.Completed,resultsAfter:c},language:l};return{query:d.source,variables:u,formattedRequest:{url:"".concat(S.graphGateway,"/graphql"),document:d.source,variables:u,requestHeaders:(0,r._)({},(0,b.C)({brand:o,experiments:a,page:"generate",appName:m}),s)}}},V=e=>{var{assetId:a,brand:t,headers:i={},page:s}=e,o={assetId:a};return{query:v.source,variables:o,formattedRequest:{url:"".concat(S.graphGateway,"/graphql"),document:v.source,variables:o,requestHeaders:(0,r._)({},(0,b.C)({brand:t,page:s,appName:n.C3}),i)}}},M=e=>{var{experiments:a,brand:t,startDate:i,endDate:s,step:o,apiClientIdList:m}=e,l={startDate:i,endDate:s,step:o,apiClientIdList:m};return{query:y.source,variables:l,formattedRequest:{url:"".concat(S.graphGateway,"/graphql"),document:d.source,variables:l,requestHeaders:(0,r._)({},(0,b.C)({brand:t,experiments:a,page:"generate",appName:n.C3}))}}}},95807:(e,a,t)=>{t.d(a,{V:()=>r});var r=e=>{var{subscriptions:a,licenseName:t}=e;return null==a?void 0:a.find(e=>e.license===t)}},96887:(e,a,t)=>{t.d(a,{K:()=>o});var r=t(85650),n=t(95807),i=e=>{var a,{licenses:t,subscriptions:r}=e;return t.some(e=>a=(0,n.V)({subscriptions:r,licenseName:e})),a},s=e=>{var{existingAssetLicenses:a,licenseType:t,licenseName:r,subscriptions:n}=e;return r==="footage_".concat(t,"_sd")?i({licenses:(null==a?void 0:a.includes("footage_".concat(t,"_hd")))?["footage_".concat(t,"_hd")]:["footage_".concat(t,"_sd"),"footage_".concat(t,"_hd")],subscriptions:n}):r==="footage_".concat(t,"_lowres")?(null==a?void 0:a.includes("footage_".concat(t,"_hd")))?i({licenses:["footage_".concat(t,"_hd")],subscriptions:n}):(null==a?void 0:a.includes("footage_".concat(t,"_sd")))?i({licenses:["footage_".concat(t,"_sd")],subscriptions:n}):i({licenses:["footage_".concat(t,"_lowres")],subscriptions:n}):void 0},o=e=>{var{existingAssetLicenses:a,subscriptions:t,licenseName:i}=e;if([r.UiI,r.eJJ,r.P2I,r.vWp,r.N8V,r.j35,r.eS$,r.Kwu,r.O_b,r.OSP,r.FO6,r.Fc7].some(e=>e===i)||r.CkD.some(e=>e===i))return(0,n.V)({subscriptions:t,licenseName:i});if([r.eNn,r.AWs,r.H8O,r.GO9].some(e=>e===i))return(0,n.V)({subscriptions:t,licenseName:r.eNn});var o=s({existingAssetLicenses:a,licenseType:r.$Me,licenseName:i,subscriptions:t}),m=s({existingAssetLicenses:a,licenseType:r.Lyy,licenseName:i,subscriptions:t}),l=s({existingAssetLicenses:a,licenseType:r.kTi,licenseName:i,subscriptions:t}),c=s({existingAssetLicenses:a,licenseType:r.IDD,licenseName:i,subscriptions:t});return o||m||l||c||void 0}}}]);
//# sourceMappingURL=73681-a5168ca94eafe2bb.js.map